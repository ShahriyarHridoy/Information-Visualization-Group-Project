<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>BRFSS 2024 Health Data Explorer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- D3.js v7 -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- TopoJSON for map visualization -->
    <script src="https://unpkg.com/topojson@3"></script>

    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- Global Loading Overlay -->
    <div id="global-loader" class="loader-overlay">
      <div class="loader-container">
        <div class="loader-spinner"></div>
        <div class="loader-text">Loading BRFSS 2024 Data...</div>
        <div class="loader-subtext">
          Please wait while we prepare the visualizations
        </div>
      </div>
    </div>

    <!-- Side Navigation Panel -->
    <nav class="sidenav" id="sidenav">
      <div class="sidenav-header">
        <h2>üìä BRFSS Explorer</h2>
        <button class="toggle-btn" id="toggle-btn">‚ò∞</button>
      </div>

      <div class="sidenav-content">
        <div class="nav-section">
          <h3>Visualizations</h3>
          <button class="nav-btn active" data-view="geographic">
            üó∫Ô∏è Geographic Disparities
          </button>
          <button class="nav-btn" data-view="risk-profile">
            üéØ Risk Factor Analysis
          </button>

          <button class="nav-btn" data-view="demographic">
            üë• Demographic Comparison
          </button>
          <button class="nav-btn" data-view="correlation">
            üîó Risk Clustering
          </button>
        </div>

        <div class="nav-section">
          <h3>About</h3>
          <div class="info-box">
            <p>
              <strong>Dataset:</strong> CDC Behavioral Risk Factor Surveillance
              System (BRFSS), 2024 - public use data file
            </p>
            <p><strong>Records:</strong> 457,670 sample</p>
            <p><strong>Variables:</strong> 300+</p>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content Area -->
    <div class="main-content" id="main-content">
      <header>
        <h1 id="page-title">Geographic Health Disparities ‚Äî BRFSS 2024</h1>
        <p class="subtitle" id="page-subtitle">
          Explore state-level health indicator patterns across the United States
        </p>
      </header>

      <main>
        <!-- View 1: Risk Factor Analysis (Original) -->
        <div class="view-container" id="view-risk-profile">
          <!-- Control Panel -->
          <section class="controls">
            <div class="control-group">
              <label>
                Y-axis Metric:
                <select id="metric-select">
                  <option value="stroke_rate_pct" selected>
                    Stroke Prevalence (%)
                  </option>
                  <option value="stroke_cases">Stroke Cases (Count)</option>
                </select>
              </label>
            </div>

            <div class="control-group">
              <label>
                üé® Color Palette:
                <select id="palette-select">
                  <option value="default" selected>Default</option>
                  <option value="categorical">Categorical</option>
                  <option value="warm">Warm</option>
                  <option value="cool">Cool</option>
                  <option value="vibrant">Vibrant</option>
                  <option value="pastel">Pastel</option>
                </select>
              </label>
            </div>

            <button id="customize-risks-btn" class="customize-btn">
              üéØ Customize Risk Factors
            </button>
          </section>

          <!-- Risk Factor Customization Panel -->
          <section
            id="risk-customization-panel"
            class="risk-panel"
            style="display: none"
          >
            <div class="panel-header">
              <div>
                <h3>üîç Explore Specific Risk Factor Combinations</h3>
                <p class="panel-subtitle">
                  Select specific combinations to analyze their stroke
                  prevalence across age groups
                </p>
              </div>
              <button
                id="close-panel-btn"
                class="close-btn"
                title="Close panel"
              >
                ‚úï
              </button>
            </div>

            <div class="panel-content">
              <!-- Single Risk Factors -->
              <div class="risk-group">
                <h4>üîπ Single Risk Factors</h4>
                <div class="checkbox-grid">
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="no_risk_factors"
                      class="risk-checkbox"
                    />
                    <span>No Risk Factors</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_smoker"
                      class="risk-checkbox"
                    />
                    <span>Current Smoker</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="has_diabetes"
                      class="risk-checkbox"
                    />
                    <span>Diabetes</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="has_prediabetes"
                      class="risk-checkbox"
                    />
                    <span>Prediabetes</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_obese"
                      class="risk-checkbox"
                    />
                    <span>Obesity (BMI ‚â•30)</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="has_heart_disease"
                      class="risk-checkbox"
                    />
                    <span>Heart Disease</span>
                  </label>
                </div>
              </div>

              <!-- Two Risk Factor Combinations -->
              <div class="risk-group">
                <h4>üîπüîπ Two Risk Factor Combinations</h4>
                <div class="checkbox-grid">
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_smoker,has_diabetes"
                      class="risk-checkbox"
                    />
                    <span>Smoker + Diabetes</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_smoker,is_obese"
                      class="risk-checkbox"
                    />
                    <span>Smoker + Obesity</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_smoker,has_heart_disease"
                      class="risk-checkbox"
                    />
                    <span>Smoker + Heart Disease</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="has_diabetes,is_obese"
                      class="risk-checkbox"
                    />
                    <span>Diabetes + Obesity</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="has_diabetes,has_heart_disease"
                      class="risk-checkbox"
                    />
                    <span>Diabetes + Heart Disease</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_obese,has_heart_disease"
                      class="risk-checkbox"
                    />
                    <span>Obesity + Heart Disease</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="has_prediabetes,is_obese"
                      class="risk-checkbox"
                    />
                    <span>Prediabetes + Obesity</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_smoker,has_prediabetes"
                      class="risk-checkbox"
                    />
                    <span>Smoker + Prediabetes</span>
                  </label>
                </div>
              </div>

              <!-- Three+ Risk Factor Combinations -->
              <div class="risk-group">
                <h4>üîπüîπüîπ Three+ Risk Factor Combinations</h4>
                <div class="checkbox-grid">
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_smoker,has_diabetes,is_obese"
                      class="risk-checkbox"
                    />
                    <span>Smoker + Diabetes + Obesity</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="has_diabetes,is_obese,has_heart_disease"
                      class="risk-checkbox"
                    />
                    <span>Diabetes + Obesity + Heart Disease</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_smoker,has_diabetes,has_heart_disease"
                      class="risk-checkbox"
                    />
                    <span>Smoker + Diabetes + Heart Disease</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="is_smoker,is_obese,has_heart_disease"
                      class="risk-checkbox"
                    />
                    <span>Smoker + Obesity + Heart Disease</span>
                  </label>
                  <label class="checkbox-label">
                    <input
                      type="checkbox"
                      value="has_prediabetes,is_obese,has_heart_disease"
                      class="risk-checkbox"
                    />
                    <span>Prediabetes + Obesity + Heart Disease</span>
                  </label>
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="panel-actions">
                <button id="apply-risks-btn" class="apply-btn">
                  ‚úì Apply Selection
                </button>
                <button id="reset-risks-btn" class="reset-btn">
                  ‚Üª Reset to Default View
                </button>
              </div>

              <!-- Current View Info -->
              <div class="selection-info">
                <strong>üìä Current View:</strong>
                <span id="current-view-text"
                  >Default aggregated risk profiles</span
                >
              </div>
            </div>
          </section>

          <!-- Chart Container -->
          <section id="chart-container">
            <!-- SVG injected by D3 -->
          </section>

          <!-- Information Notes -->
          <section class="notes">
            <div class="note-card">
              <h4>üìä Data Source</h4>
              <p>
                CDC Behavioral Risk Factor Surveillance System (BRFSS), 2024
                public-use data file <br /><br />
                <!-- <strong>Note:</strong> 100,000 records used in this
                visualization -->
              </p>
            </div>

            <div class="note-card">
              <h4>üî¨ Risk Factors</h4>
              <p>
                Current smoking (_RFSMOK3), Diabetes (DIABETE4), Prediabetes
                (PREDIAB2), Obesity - BMI‚â•30 (_RFBMI5), Heart Disease (CVDCRHD4)
              </p>
            </div>

            <div class="note-card">
              <h4>üéÆ Interactions</h4>
              <ul>
                <li>
                  <strong>Hover</strong> over bars to see detailed statistics
                </li>
                <li>
                  <strong>Switch metrics</strong> between prevalence (%) and
                  case counts
                </li>
                <li>
                  <strong>Customize</strong> to explore specific risk factor
                  combinations
                </li>
              </ul>
            </div>
          </section>
        </div>

        <!-- View 2: Geographic Disparities -->
        <div class="view-container active" id="view-geographic">
          <section class="controls">
            <div class="control-group">
              <label>
                Health Indicator:
                <select id="geo-indicator-select">
                  <option value="stroke">Stroke Prevalence</option>
                  <option value="diabetes">Diabetes Prevalence</option>
                  <option value="obesity">Obesity Rate</option>
                  <option value="smoking">Smoking Rate</option>
                  <option value="heart_disease">Heart Disease</option>
                </select>
              </label>
            </div>

            <div class="control-group">
              <label>
                üé® Color Scheme:
                <select id="geo-color-select">
                  <option value="default" selected>Default</option>
                  <option value="categorical">Categorical</option>
                  <option value="warm">Warm</option>
                  <option value="cool">Cool</option>
                  <option value="vibrant">Vibrant</option>
                  <option value="pastel">Pastel</option>
                </select>
              </label>
            </div>

            <button id="compare-states-btn" class="customize-btn">
              üîç Compare States
            </button>
          </section>

          <!-- State Comparison Panel -->
          <section
            id="state-comparison-panel"
            class="risk-panel"
            style="display: none"
          >
            <div class="panel-header">
              <div>
                <h3>üìä State-by-State Comparison</h3>
                <p class="panel-subtitle">
                  Select two states to compare their health metrics side-by-side
                </p>
              </div>
              <button
                id="close-comparison-btn"
                class="close-btn"
                title="Close panel"
              >
                ‚úï
              </button>
            </div>

            <div class="panel-content">
              <div class="risk-group">
                <h4>üó∫Ô∏è Select States to Compare</h4>
                <div
                  style="
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 20px;
                  "
                >
                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        font-weight: 600;
                        color: #0d9488;
                      "
                    >
                      First State:
                    </label>
                    <select
                      id="compare-state-1"
                      class="state-select"
                      style="
                        width: 100%;
                        padding: 10px;
                        border: 2px solid #e5e7eb;
                        border-radius: 6px;
                        font-size: 0.95rem;
                      "
                    >
                      <option value="">-- Select State --</option>
                    </select>
                  </div>
                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        font-weight: 600;
                        color: #0d9488;
                      "
                    >
                      Second State:
                    </label>
                    <select
                      id="compare-state-2"
                      class="state-select"
                      style="
                        width: 100%;
                        padding: 10px;
                        border: 2px solid #e5e7eb;
                        border-radius: 6px;
                        font-size: 0.95rem;
                      "
                    >
                      <option value="">-- Select State --</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- <div class="panel-actions">
                <button id="apply-comparison-btn" class="apply-btn">
                  ‚úì Show Comparison
                </button>
              </div> -->

              <!-- Action Buttons -->
              <div class="panel-actions">
                <button id="apply-comparison-btn" class="apply-btn">
                  ‚úì Show Comparison
                </button>
                <!-- <button id="reset-risks-btn" class="reset-btn"> -->
                <button id="reset-comparison-btn" class="reset-btn">
                  ‚Üª Reset to Default View
                </button>
              </div>

              <!-- Comparison Results -->
              <div id="comparison-results" style="display: none">
                <!-- Will be populated dynamically -->
              </div>
            </div>
          </section>

          <section id="map-container" class="chart-container">
            <!-- Map will be rendered here -->
          </section>

          <section class="notes">
            <div class="note-card">
              <h4>üó∫Ô∏è Geographic Analysis</h4>
              <p>
                This choropleth map shows health indicator prevalence across
                U.S. states. Darker colors indicate higher prevalence rates.
              </p>
            </div>
            <div class="note-card">
              <h4>üí° Usage</h4>
              <p>
                Hover over states to see exact values. Select different
                indicators to compare geographic patterns across health metrics.
              </p>
            </div>
          </section>
        </div>

        <!-- View 3: Demographic Comparison -->
        <div class="view-container" id="view-demographic">
          <section class="controls">
            <div class="control-group">
              <label>
                Demographic Factor:
                <select id="demo-factor-select">
                  <option value="age">Age Group</option>
                  <option value="income">Income Level</option>
                  <option value="education">Education Level</option>
                  <option value="race">Race/Ethnicity</option>
                </select>
              </label>
            </div>

            <div class="control-group">
              <label>
                Health Outcome:
                <select id="demo-outcome-select">
                  <option value="stroke">Stroke</option>
                  <option value="diabetes">Diabetes</option>
                  <option value="heart_disease">Heart Disease</option>
                  <option value="obesity">Obesity</option>
                </select>
              </label>
            </div>
          </section>

          <section id="demographic-container" class="chart-container">
            <!-- Demographic chart will be rendered here -->
          </section>

          <section class="notes">
            <div class="note-card">
              <h4>üë• Demographic Disparities</h4>
              <p>
                Compare health outcomes across different demographic groups to
                identify health equity gaps and at-risk populations.
              </p>
            </div>
          </section>
        </div>

        <!-- View 4: Risk Clustering -->
        <div class="view-container" id="view-correlation">
          <section id="correlation-container" class="chart-container">
            <!-- Correlation visualization will be rendered here -->
          </section>

          <section class="notes">
            <div class="note-card">
              <h4>üîó Risk Factor Clustering</h4>
              <p>
                Explore how different health conditions and risk behaviors
                co-occur to identify patterns of multimorbidity and high-risk
                populations.
              </p>
            </div>
          </section>
        </div>
      </main>

      <footer>
        <p class="footer-note">
          Data Visualization Group Assignment | S M Shahriyar, Md hasan Habib,
          Md. Ahsanul Karim Likhan | TU Wien
        </p>
      </footer>
    </div>

    <script src="js/script.js"></script>
  </body>
</html>
